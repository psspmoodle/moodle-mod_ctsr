define(["jquery","core/localstorage","theme_boost/tab","theme_boost/tooltip"],function(a,b){function c(){return document.querySelector("body").className.match(/cmid-(\d+)/)[1]}function d(a){document.querySelector("#pills-"+a+"-tab").classList.add("active"),document.querySelector("#pills-"+a).classList.add("active","show")}function e(a){m.currentTime=a}function f(a){o.forEach(function(b){b.innerHTML=a.toFixed(1)})}function g(){var a=0;return n.forEach(function(b){a+=parseFloat(b.value)}),a}function h(){document.addEventListener("click",function(a){a.target.classList.contains("ctsr-tab")&&b.set(k,a.target.id.match(/\d+/))})}function i(){m.addEventListener("timeupdate",function(){b.set(l,m.currentTime),m.ended&&b.set(l,"0")})}function j(){n.forEach(function(a){a.addEventListener("change",function(){f(g())})})}const k="mod_ctsr/tab-"+c(),l="mod_ctsr/audio-"+c(),m=document.querySelector("#ctsr-audio"),n=document.querySelectorAll('select[id$="score"]'),o=document.querySelectorAll("#ctsr-score-total");return this.prepareCtsr=function(){a('[data-toggle="tooltip"]').tooltip();const c=b.get(k)||1,m=b.get(l)||0;d(c),e(m),f(g()),h(),i(),j()},{init:prepareCtsr}});